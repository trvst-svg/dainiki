@page "/newjournal"

<div class="new-journal-page"
     style="
        min-height:100vh;
        background-color:#2b2b2b;
        background-image:linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6));
        display:flex;
        flex-direction:column;
        justify-content:flex-start;
        font-family:'Times New Roman', Times, serif;
        color:white;
        overflow:hidden;
     ">

    <div class="header-message" style="margin-top:3vw; margin-left:1vw;">
        <h1 style="color:gold;">Write today's dainiki</h1>
    </div>

    <div class="dainiki-input-fields">

        <div class="title-input" style="margin-left:1vw; margin-top:1vw;">
            <label>Title</label><br />
            <input placeholder="Title"
                   @bind="title"
                   style="width:20%; padding:8px; font-family:'Times New Roman', Times, serif;" />
        </div>

        <div style="margin-top:1vw; margin-left:1vw;">
            <label>Primary mood</label>
            <div class="btn-group">
                <button type="button"
                        class="btn btn-secondary dropdown-toggle"
                        data-bs-toggle="dropdown">
                    @primaryMood
                </button>

                <ul class="dropdown-menu">
                    @foreach (var mood in moods)
                    {
                        <li>
                            <button class="dropdown-item"
                                    type="button"
                                    @onclick="() => primaryMood = mood">
                                @mood
                            </button>
                        </li>
                    }
                </ul>
            </div>
        </div>

        <div style="margin-top:1vw; margin-left:1vw;">
            <label>Secondary mood 1</label>
            <div class="btn-group">
                <button type="button"
                        class="btn btn-secondary dropdown-toggle"
                        data-bs-toggle="dropdown">
                    @mood1
                </button>

                <ul class="dropdown-menu">
                    @foreach (var mood in moods)
                    {
                        <li>
                            <button class="dropdown-item"
                                    type="button"
                                    @onclick="() => mood1 = mood">
                                @mood
                            </button>
                        </li>
                    }
                </ul>
            </div>
        </div>

        <div style="margin-top:1vw; margin-left:1vw;">
            <label>Secondary mood 2</label>
            <div class="btn-group">
                <button type="button"
                        class="btn btn-secondary dropdown-toggle"
                        data-bs-toggle="dropdown">
                    @mood2
                </button>

                <ul class="dropdown-menu">
                    @foreach (var mood in moods)
                    {
                        <li>
                            <button class="dropdown-item"
                                    type="button"
                                    @onclick="() => mood2 = mood">
                                @mood
                            </button>
                        </li>
                    }
                </ul>
            </div>
        </div>

        <div style="margin-top:1vw; margin-left:1vw;">
            <label>Tags</label>

            <div class="btn-group">
                <button type="button"
                        class="btn btn-secondary dropdown-toggle"
                        data-bs-toggle="dropdown">
                    @(selectedTags.Count == 0
                        ? "Select tags"
                        : string.Join(", ", selectedTags))
                </button>

                <ul class="dropdown-menu" style="max-height:200px; overflow-y:auto;">
                    @foreach (var tag in allTags)
                    {
                        <li>
                            <button class="dropdown-item"
                                    type="button"
                                    @onclick="() => ToggleTag(tag)">
                                @(selectedTags.Contains(tag) ? "âœ“ " : "")@tag
                            </button>
                        </li>
                    }
                </ul>
            </div>
        </div>

    </div>

    <div style="margin-top:1vw; margin-left:1vw;">
        <label>Write your content here</label><br />
        <textarea @bind="description"
                  style="
                        width:80%;
                        margin-top:1vw;
                        height:15vw;
                        font-family:'Times New Roman', Times, serif;
                  ">
        </textarea>
    </div>

    <div style="margin-top:2vw; margin-left:auto; margin-right:5vw;">
        <button class="btn btn-success" @onclick="saveJournal">
            Save
        </button>
    </div>

</div>

@code {
    private string title;
    private string description;

    private string primaryMood = "Select mood";
    private string mood1 = "Select mood";
    private string mood2 = "Select mood";

    private List<string> moods = new()
    {
        "happy", "sad", "angry", "amused", "funny"
    };

    private List<string> allTags = new()
    {
        "Work", "Career", "Studies", "Family", "Friends", "Relationships",
        "Health", "Fitness", "Personal Growth", "Self-care", "Hobbies", "Travel", "Nature",
        "Finance", "Spirituality", "Birthday", "Holiday", "Vacation", "Celebration", "Exercise",
        "Reading", "Writing", "Cooking", "Meditation", "Yoga", "Music", "Shopping", "Parenting",
        "Projects", "Planning", "Reflection"
    };

    private List<string> selectedTags = new();

    void ToggleTag(string tag)
    {
        if (selectedTags.Contains(tag))
            selectedTags.Remove(tag);
        else
            selectedTags.Add(tag);
    }

    void saveJournal()
    {
    }
}
