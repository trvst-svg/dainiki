@page "/signup"
@page "/"
@using Npgsql;
@inject NavigationManager Navigation
<div class="login-page"
     style="
        min-height:100vh;
        background-color:#2b2b2b;
        background-image:linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6));
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        font-family:'Times New Roman', Times, serif;
        color:white;
        overflow: hidden;
     ">

    <div class="welcome-message" align="center">
        <h1 style="color:white; margin-bottom:20px;">
            Welcome To Dainiki
        </h1>
        <h1 style="color:green; margin-bottom:20px;">Signup</h1>

    </div>

    <form @onsubmit="signupValidator">
        <div class="form-group" style="margin-bottom:15px; width:300px;">
            <label for="username" style="display:block; margin-bottom:5px;">Username</label>
            <input type = "text" @bind = "username" placeholder = "Username" style = " width:100%; padding:8px; font-family:'Times New Roman', Times, serif;">
        </div>

        <div class="form-group" style="margin-bottom:15px; width:300px;">
            <label for="password" style="display:block; margin-bottom:5px;">Password</label>
            <input type = "password" @bind = "password" placeholder = "Password" style ="width:100%; padding:8px; font-family:'Times New Roman', Times, serif;">
        </div>
        
        <button class = "btn btn-primary" type = "submit">Sign Up</button>
    </form>
    <p style="margin-top:15px; color:white;">@message</p>
    
</div>

@code {
    private string username;
    private string password;
    private string message;

    async Task signupValidator()
    {
        if (string.IsNullOrWhiteSpace(username) || string.IsNullOrWhiteSpace(password))
        {
            message = "Username or password invalid";
            return;
        }

        message = "signed up successfully";
        Console.WriteLine("Signup method called");
        Navigation.NavigateTo("login");

    }
}
